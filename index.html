import React from "react";

/*
  Portfolio component (fixed for GitHub builds)

  Fix summary:
  - Removed direct static ES import of `profile.png` which breaks when the image isn't next to the component file.
  - Uses a runtime-resolved `profileSrc` that respects CRA's `process.env.PUBLIC_URL` (if present) and falls back to `/profile.png`.
  - Adds an onError handler to the <img> to fall back to an inline SVG placeholder when the image can't be found at build/runtime.

  Deployment notes:
  - Put `profile.png` in your project's `public/` folder for Create React App / Vite / GitHub Pages deployments.
  - If you host under a subpath (e.g. GitHub Pages like `/username/repo-name/`), make sure `PUBLIC_URL` is set (CRA's `homepage` field in package.json), or replace `profileSrc` with the correct absolute path.
*/

const PUBLIC_URL = (typeof process !== "undefined" && process.env && process.env.PUBLIC_URL)
  ? process.env.PUBLIC_URL
  : "";
const profileSrc = `${PUBLIC_URL}/profile.png`;

// Simple placeholder (inline SVG) used when the image isn't found
const placeholderSVG =
  'data:image/svg+xml;utf8,' +
  encodeURIComponent(
    `<svg xmlns="http://www.w3.org/2000/svg" width="400" height="400" viewBox="0 0 400 400">` +
      `<rect width="100%" height="100%" fill="#111"/>` +
      `<text x="50%" y="50%" fill="#888" font-family="Inter, Arial, sans-serif" font-size="72" dominant-baseline="middle" text-anchor="middle">AJ</text>` +
    `</svg>`
  );

function Button({ children, className = "", ...props }) {
  return (
    <button
      {...props}
      className={`rounded-full px-6 py-3 font-semibold transition ${className}`}
    >
      {children}
    </button>
  );
}

function GithubIcon({ size = 20 }) {
  return (
    <svg width={size} height={size} viewBox="0 0 24 24" fill="currentColor" aria-hidden>
      <path d="M12 .5C5.73.5.75 5.48.75 11.75c0 4.94 3.2 9.13 7.64 10.61.56.1.76-.24.76-.53 0-.26-.01-1-.02-1.96-3.11.68-3.77-1.5-3.77-1.5-.51-1.3-1.25-1.65-1.25-1.65-1.02-.7.08-.69.08-.69 1.12.08 1.71 1.16 1.71 1.16 1 .71 2.62.5 3.26.38.1-.78.39-1.3.71-1.6-2.49-.28-5.11-1.25-5.11-5.56 0-1.23.44-2.24 1.16-3.03-.12-.28-.5-1.4.11-2.92 0 0 .95-.3 3.12 1.16.9-.25 1.86-.38 2.82-.38.96 0 1.92.13 2.82.38 2.17-1.46 3.12-1.16 3.12-1.16.61 1.52.23 2.64.12 2.92.72.79 1.16 1.8 1.16 3.03 0 4.32-2.62 5.27-5.12 5.55.4.35.76 1.04.76 2.1 0 1.52-.01 2.74-.01 3.11 0 .29.19.64.77.53C19.06 20.88 22.26 16.7 22.26 11.75 22.26 5.48 17.28.5 12 .5z" />
    </svg>
  );
}
function LinkedinIcon({ size = 20 }) {
  return (
    <svg width={size} height={size} viewBox="0 0 24 24" fill="currentColor" aria-hidden>
      <path d="M4.98 3.5C4.98 4.88 3.86 6 2.48 6S0 4.88 0 3.5 1.12 1 2.5 1s2.48 1.12 2.48 2.5zM0 8.5h5v15H0v-15zm7.5 0h4.8v2.1h.1c.67-1.27 2.3-2.6 4.73-2.6 5.06 0 6 3.33 6 7.66v8.84h-5V16.2c0-2.07-.04-4.74-2.88-4.74-2.88 0-3.32 2.25-3.32 4.57v8.02H7.5v-15z"/>
    </svg>
  );
}
function MailIcon({ size = 20 }) {
  return (
    <svg width={size} height={size} viewBox="0 0 24 24" fill="currentColor" aria-hidden>
      <path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4-8 5L4 8V6l8 5 8-5v2z"/>
    </svg>
  );
}

export default function Portfolio() {
  return (
    <div className="min-h-screen bg-black text-white font-sans tracking-wide">
      {/* Hero Section */}
      <header className="relative h-screen flex flex-col justify-center items-center text-center px-6 overflow-hidden">
        <h1 className="text-6xl md:text-8xl font-extrabold uppercase bg-clip-text text-transparent bg-gradient-to-r from-gray-100 to-gray-400">
          Ajmal
        </h1>

        {/* Replaced the three lines under the name with a single subtitle as requested */}
        <p className="mt-4 text-neutral-400 text-lg md:text-xl">Junior Embedded Developer</p>

        {/* CTA */}
        <Button className="mt-10 border border-neutral-700 text-sm uppercase tracking-wider bg-transparent hover:bg-neutral-900">Explore →</Button>
      </header>

      {/* About Section */}
      <section id="about" className="py-24 px-6 md:px-20 flex flex-col md:flex-row items-center gap-12 border-t border-neutral-900">
        <div className="md:w-1/2">
          <h2 className="text-3xl font-semibold mb-6 uppercase">About Ajmal</h2>
          <p className="text-neutral-400 leading-relaxed max-w-xl">
            Since 2013, Ajmal has immersed himself in the world of craftsmanship, forging a deep connection with digital design and interactive experiences. Every project tells a story, reflecting timeless elegance merged with modern functionality.
          </p>
          <Button className="mt-6 border border-neutral-600 px-6 py-2 rounded-full hover:bg-neutral-800 text-sm uppercase">Learn More →</Button>
        </div>

        <div className="md:w-1/2 flex justify-center">
          {/* Use runtime-resolved public path to avoid import/build issues */}
          <img
            src={profileSrc}
            alt="Ajmal"
            className="rounded-xl w-80 h-80 object-cover shadow-lg"
            onError={(e) => {
              // Fallback to inline placeholder PNG (data URI)
              const target = e.currentTarget;
              target.onerror = null;
              target.src = placeholderSVG;
            }}
          />
        </div>
      </section>

      {/* Gallery Section */}
      <section id="gallery" className="py-24 px-6 md:px-20 border-t border-neutral-900 text-center">
        <h2 className="text-3xl font-semibold mb-12 uppercase">Gallery</h2>
        <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
          {[1, 2, 3, 4, 5, 6, 7, 8].map((i) => (
            <div key={i} className="bg-neutral-900 aspect-square flex items-center justify-center">
              <span className="text-neutral-600">Image {i}</span>
            </div>
          ))}
        </div>
      </section>

      {/* Achievements Section */}
      <section id="achievements" className="py-24 px-6 md:px-20 border-t border-neutral-900">
        <h2 className="text-3xl font-semibold mb-12 uppercase">Achievements</h2>
        <div className="grid md:grid-cols-3 gap-8">
          <div>
            <h3 className="text-xl font-semibold">Award</h3>
            <p className="text-neutral-400">2023 • Laureat Fondation</p>
          </div>
          <div>
            <h3 className="text-xl font-semibold">Exhibitions</h3>
            <p className="text-neutral-400">Paris • 2023</p>
          </div>
          <div>
            <h3 className="text-xl font-semibold">Showcase</h3>
            <p className="text-neutral-400">Digital Experience • 2023</p>
          </div>
        </div>
      </section>

      {/* Quote Section */}
      <section className="py-24 px-6 md:px-20 text-center border-t border-neutral-900">
        <p className="text-3xl md:text-4xl italic max-w-3xl mx-auto leading-relaxed">“Through fire and finesse, we bring forth the soul of design.”</p>
      </section>

      {/* Contact Section */}
      <section id="contact" className="py-24 px-6 md:px-20 border-t border-neutral-900 text-center">
        <h2 className="text-3xl font-semibold mb-6 uppercase">Feel The Texture</h2>
        <form className="max-w-lg mx-auto flex flex-col gap-4">
          <input type="text" placeholder="Your Name" className="p-3 bg-neutral-900 border border-neutral-700 rounded-md" />
          <input type="email" placeholder="Your Email" className="p-3 bg-neutral-900 border border-neutral-700 rounded-md" />
          <Button className="bg-neutral-200 text-black px-6 py-3 rounded-full hover:bg-neutral-300 font-semibold uppercase tracking-wide">Get in Touch →</Button>
        </form>
      </section>

      {/* Footer */}
      <footer className="py-8 text-center text-neutral-500 border-t border-neutral-900 text-sm">
        <p>© {new Date().getFullYear()} Ajmal — All Rights Reserved.</p>
        <div className="flex justify-center gap-4 mt-4 text-neutral-400">
          <a href="#" aria-label="GitHub"><GithubIcon size={20} /></a>
          <a href="#" aria-label="LinkedIn"><LinkedinIcon size={20} /></a>
          <a href="mailto:ajmal@example.com" aria-label="Mail"><MailIcon size={20} /></a>
        </div>
      </footer>
    </div>
  );
}
